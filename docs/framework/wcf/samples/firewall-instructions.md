---
title: 防火墙说明
description: 了解如何在防火墙中为 WCF 示例启用端口或程序。 根据你的要求和安全环境使用这些过程之一。
ms.date: 03/30/2017
ms.assetid: a7dc429f-65ac-4faf-974a-77d5fb977fe1
ms.openlocfilehash: de55d067960b8f2096c129f6feaf037219e06a96
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/23/2020
ms.locfileid: "85246136"
---
# <a name="firewall-instructions"></a>防火墙说明

你必须在防火墙中启用多个端口或程序，以便 Windows Communication Foundation （WCF）示例可以正常工作。 其中许多示例使用范围 8000-8003 中的端口和端口 9000 进行通信。 防火墙默认情况下会打开，阻止对这些端口进行访问。 若要针对这些示例启用防火墙，请完成以下过程之一，具体情况取决于您的需求和安全环境：

- 选项 1：在运行时以交互方式启用示例。 不预先更改防火墙配置，并继续开始生成和运行示例的过程。 运行示例时，将显示 " **Windows 安全警报**" 对话框。 然后，可以通过交互方式将所讨论的示例程序添加到取消阻止列表。 对于此过程，您可能必须随后重新启动示例。

- 选项 2：预先启用示例程序。 启动**Windows 防火墙控制面板**小程序，并启用计划运行的示例程序。 您必须首先生成这些程序，以生成它们的可执行文件。 可以在以下过程中找到更详细的说明。

- 选项 3：预先启用端口范围。 启动**Windows 防火墙控制面板**小程序，并启用示例使用的端口80、443、8000-8003 和9000。 可以在以下过程中找到更详细的说明。 相对于其他选项而言，此选项的安全性较差，因为它允许任何程序（而不仅仅是示例）使用这些端口。

如果不确定要使用哪个过程，请选择第一个选项。 如果运行其他供应商提供的防火墙，您可能需要进行类似的更改。

> [!IMPORTANT]
> 更改防火墙配置会对安全产生影响。 建议您记录所做的更改，并在使用完示例后移除这些更改。

## <a name="enable-samples-programs-in-advance"></a>预先启用示例程序

1. 生成示例。

2. 选择 "**启动**  >  **运行**"，然后输入 `firewall.cpl` 。 这将打开 " **Windows 防火墙控制面板**" 小程序。

    > [!NOTE]
    > 必须具有更改防火墙设置的权限，才能运行需要能够通过 Windows 防火墙进行通信的示例。 如果某些防火墙设置不可用，并且您的计算机连接到域，则系统管理员可以通过组策略控制这些设置。

3. 完成以下特定于操作的步骤之一，允许程序通过 Windows 防火墙：

    - 在 Windows 7 或 Windows Server 2008 R2 上，单击 "**允许程序或功能通过 Windows 防火墙**"。 单击 "**更改设置**" "  >  **允许其他程序**"。

    - 在 Windows Vista 或 Windows Server 2008 上，单击 "**允许程序通过 Windows 防火墙**"。

4. 在 "**例外**" 选项卡上，单击 "**添加程序**"。

5. 单击 "**浏览**" 按钮，然后选择你计划运行的示例的可执行文件。

6. 重复步骤4和步骤5，直到您添加了您计划运行的所有示例的可执行文件。

7. 单击 **"确定"** 以关闭防火墙小程序。

## <a name="enable-a-port-range-in-advance"></a>预先启用端口范围

1. 选择 "**启动**  >  **运行**"，然后输入 `firewall.cpl` 。 这将打开 " **Windows 防火墙控制面板**" 小程序。

2. 在 Windows 7 或 Windows Server 2008 R2 上，按以下步骤操作。

    1. 单击 "Windows 防火墙" 窗口左栏中的 "**高级设置**"。

    2. 单击左栏中的 "**入站规则**"。

    3. 单击右侧列中的 "**新建规则**"。

    4. 选择**端口**，然后单击 "**下一步**"。

    5. 选择 " **TCP** "，然后 `8000, 8001, 8002, 8003, 9000, 80, 443` 在 "**特定本地端口**" 字段中输入。

    6. 单击“下一步”****。

    7. 选择 **"允许连接**"，然后单击 "**下一步**"。

    8. 选择 "**域**和**专用**"，然后单击 "**下一步**"。

    9. 为此规则命名 `WCF-WF 4.0 Samples` ，然后单击 "**完成**"。

    10. 单击 "**出站规则**"，然后重复步骤 c 到 h。

3. 在 Windows Vista 或 Windows Server 2008 上，请执行以下步骤。

    1. 单击“允许程序通过 Windows 防火墙”****。

    2. 在 "**例外**" 选项卡上，单击 "**添加端口**"。

    3. 输入名称，输入8000作为端口号，然后选择 " **TCP** " 选项。

    4. 单击 "**更改作用域**" 按钮，选择 "仅**我的网络**（子网）" 选项，然后单击 **"确定"**。

    5. 为端口 8001、8002、8003、9000、80 和 443 重复步骤 b 到 d。

4. 单击 **"确定"** 以关闭防火墙小程序。

> [!NOTE]
> 使用完示例后，请移除任何防火墙例外。 为此，请打开**Windows 防火墙控制面板**小程序，并删除前面的过程添加的任何程序或端口项。
